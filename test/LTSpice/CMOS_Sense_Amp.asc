Version 4.1
SHEET 1 2300 1200
WIRE -80 -560 -96 -560
WIRE -48 -560 -80 -560
WIRE 320 -560 192 -560
WIRE 400 -560 320 -560
WIRE -96 -512 -96 -560
WIRE -96 -512 -160 -512
WIRE 192 -512 192 -560
WIRE 256 -512 192 -512
WIRE 400 -512 400 -560
WIRE -96 -496 -96 -512
WIRE 192 -496 192 -512
WIRE -16 -480 -48 -480
WIRE 144 -480 -16 -480
WIRE -160 -448 -160 -512
WIRE -96 -448 -160 -448
WIRE 256 -448 256 -512
WIRE 256 -448 192 -448
WIRE 400 -400 400 -432
WIRE -96 -384 -96 -400
WIRE -16 -384 -16 -480
WIRE -16 -384 -96 -384
WIRE -96 -368 -96 -384
WIRE -96 -256 -96 -288
WIRE 192 -256 192 -400
WIRE 192 -256 48 -256
WIRE 224 -256 192 -256
WIRE 320 -256 224 -256
WIRE 48 -224 48 -256
WIRE 112 -224 48 -224
WIRE 320 -224 320 -256
WIRE 320 -224 256 -224
WIRE 48 -208 48 -224
WIRE 320 -208 320 -224
WIRE 0 -192 -64 -192
WIRE 432 -192 368 -192
WIRE 112 -160 112 -224
WIRE 112 -160 48 -160
WIRE 256 -160 256 -224
WIRE 320 -160 256 -160
WIRE -368 -112 -720 -112
WIRE -208 -112 -288 -112
WIRE -64 -112 -64 -192
WIRE -64 -112 -208 -112
WIRE 432 -112 432 -192
WIRE 464 -112 432 -112
WIRE -720 -80 -720 -112
WIRE -64 -80 -64 -112
WIRE -48 -80 -64 -80
WIRE 48 -80 48 -112
WIRE 48 -80 32 -80
WIRE 96 -80 48 -80
WIRE 144 -80 96 -80
WIRE 160 -80 144 -80
WIRE 224 -80 208 -80
WIRE 272 -80 224 -80
WIRE 320 -80 320 -112
WIRE 320 -80 272 -80
WIRE 336 -80 320 -80
WIRE 432 -80 432 -112
WIRE 432 -80 416 -80
WIRE -368 -48 -432 -48
WIRE -208 -48 -288 -48
WIRE -160 -48 -208 -48
WIRE 48 -48 48 -80
WIRE 320 -48 320 -80
WIRE -432 0 -432 -48
WIRE 112 0 48 0
WIRE 320 0 256 0
WIRE -64 32 -64 -80
WIRE 0 32 -64 32
WIRE 432 32 432 -80
WIRE 432 32 368 32
WIRE 48 64 48 48
WIRE 112 64 112 0
WIRE 112 64 48 64
WIRE 256 64 256 0
WIRE 256 64 112 64
WIRE 320 64 320 48
WIRE 320 64 256 64
WIRE 48 96 48 64
WIRE 320 96 320 64
WIRE 48 112 48 96
WIRE 320 112 320 96
WIRE -720 144 -720 0
WIRE -624 144 -720 144
WIRE -576 144 -624 144
WIRE -432 144 -432 80
WIRE -432 144 -576 144
WIRE 48 160 -16 160
WIRE 384 160 320 160
WIRE -576 192 -576 144
WIRE 144 192 144 -80
WIRE 144 192 96 192
WIRE 224 192 224 -80
WIRE 272 192 224 192
WIRE -16 224 -16 160
WIRE 48 224 48 208
WIRE 48 224 -16 224
WIRE 320 224 320 208
WIRE 384 224 384 160
WIRE 384 224 320 224
WIRE 48 272 48 224
WIRE 192 272 48 272
WIRE 320 272 320 224
WIRE 320 272 192 272
WIRE 192 304 192 272
WIRE -576 320 -576 272
FLAG 400 -400 0
FLAG 320 -560 Vdd
FLAG -208 -112 in_p
FLAG 192 304 0
FLAG -576 320 0
FLAG 464 -112 in_m
FLAG -208 -48 in_m
FLAG -624 144 v_cm
FLAG 272 -80 out_p
FLAG 96 -80 out_m
FLAG 224 -256 vdp
FLAG 320 96 vsn
FLAG 48 96 vsp
FLAG -96 -256 0
FLAG -80 -560 Vdd
SYMBOL voltage 400 -528 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value {VDD}
SYMBOL voltage -720 -96 M0
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE({Vlow} {Vhigh} {td} {tr} {tf} {ton} {Tp})
SYMATTR Value2 AC 0.5 0
SYMATTR InstName Vsig+
SYMBOL pmos4 0 -112 M180
SYMATTR InstName M1
SYMATTR Value pch
SYMATTR Value2 l={inv_p_length} w={inv_p_width} m={mult}
SYMBOL nmos4 0 -48 R0
SYMATTR InstName M2
SYMATTR Value nch
SYMATTR Value2 l={inv_n_length} w={inv_n_width} m={mult}
SYMBOL pmos4 368 -112 R180
SYMATTR InstName M3
SYMATTR Value pch
SYMATTR Value2 l={inv_p_length} w={inv_p_width} m={mult}
SYMBOL nmos4 368 -48 M0
SYMATTR InstName M4
SYMATTR Value nch
SYMATTR Value2 l={inv_n_length} w={inv_n_width} m={mult}
SYMBOL nmos4 96 112 M0
SYMATTR InstName M5
SYMATTR Value nch
SYMATTR Value2 l=180n w=1u
SYMBOL voltage -432 96 R180
WINDOW 39 0 0 Left 2
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE({Vlow} {Vhigh} {td} {tr} {tf} {ton} {Tp})
SYMATTR Value2 AC 0.5 0
SYMATTR InstName Vsig-
SYMBOL voltage -576 176 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcm
SYMATTR Value {Vcm}
SYMBOL pmos4 144 -400 M180
SYMATTR InstName M7
SYMATTR Value pch
SYMATTR Value2 l={csrc_length} w={csrc_width}
SYMBOL nmos4 272 112 R0
SYMATTR InstName M6
SYMATTR Value nch
SYMATTR Value2 l=180n w=1u
SYMBOL pmos4 -48 -400 R180
SYMATTR InstName M8
SYMATTR Value pch
SYMATTR Value2 l={csrc_length} w={csrc_width}
SYMBOL res -112 -384 R0
SYMATTR InstName R1
SYMATTR Value 5k
SYMBOL res -272 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 50
SYMBOL res -272 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 50
TEXT -224 416 Left 2 !.lib 'C:\\Users\\ernes\\OneDrive\\Documents\\LTspice\\ECE298A\\mos018.l' TT
TEXT -1360 48 Left 2 !.param Vlow=-Vp
TEXT 1032 336 Left 2 !.tran 0 100e-9 0 1e-11
TEXT 1032 304 Left 2 ;.op
TEXT -1360 80 Left 2 !.param Vhigh=Vp
TEXT -1360 16 Left 2 !.param Vp=100m
TEXT -1384 -392 Left 2 !.param fp=66e6
TEXT -1384 -344 Left 2 !.param td=0
TEXT -1384 -312 Left 2 !.param tr=1e-10
TEXT -1384 -280 Left 2 !.param tf=tr
TEXT -1384 -248 Left 2 !.param ton=Tp/2-tr
TEXT -1384 -216 Left 2 !.param Tp=1/fp
TEXT -1792 16 Left 2 ;Differential voltage from 900mV ->
TEXT -1728 64 Left 2 ;Differential voltage sources ->
TEXT -1664 -392 Left 2 ;Frequency of pulses ->
TEXT -1824 -344 Left 2 ;Square wave delay before starting ->
TEXT -1544 -312 Left 2 ;Rise time ->
TEXT -1536 -280 Left 2 ;Fall time ->
TEXT -1528 -248 Left 2 ;On time ->
TEXT -1800 -216 Left 2 ;Period calculted from frequency ->
TEXT -1368 200 Left 2 !.param Vcm=0.9
TEXT -1680 200 Left 2 ;Common mode voltage ->
TEXT 1024 -488 Left 2 ;Supply voltage:
TEXT 1288 -488 Left 2 !.param VDD=1.8
TEXT -1376 -568 Left 2 !.param Vcs=VDD-Vds
TEXT -1816 -568 Left 2 ;Current source PMOS gate voltage ->
TEXT 1016 -216 Left 2 ;inv. PMOS length:
TEXT 1280 -216 Left 2 !.param inv_p_length=500n
TEXT 1016 -8 Left 2 ;inv. NMOS width:
TEXT 1280 -40 Left 2 !.param inv_n_length=inv_p_length
TEXT 1016 -184 Left 2 ;inv. PMOS width:
TEXT 1280 -184 Left 2 !.param inv_p_width=7u
TEXT 1016 -40 Left 2 ;inv. NMOS length:
TEXT 1280 -8 Left 2 !.param inv_n_width=(inv_p_width/5)
TEXT 1016 104 Left 2 ;feedback NMOS length:
TEXT 1016 136 Left 2 ;feedback NMOS width:
TEXT 1320 136 Left 2 !.param fb_width=1u
TEXT 1320 104 Left 2 !.param fb_length=default_length
TEXT 1016 -400 Left 2 ;current src length:
TEXT 1016 -368 Left 2 ;current src width:
TEXT 1280 -400 Left 2 !.param csrc_length=default_length
TEXT 1280 -368 Left 2 !.param csrc_width=10u
TEXT 1288 -544 Left 2 !.param default_length=180n
TEXT 1800 -536 Left 2 ;min width 1u\nmin length 180n
TEXT -1376 -536 Left 2 !.param Vds=0.7
TEXT -16 -1000 Left 2 ;Current source gate voltage, current source width, and feedback NMOS width\nall affect common mode voltage.
TEXT 1032 368 Left 2 ;.ac dec 51 1k 1G
TEXT 1784 -184 Left 2 ;.step param inv_p_width 5u 15u 1u
TEXT 760 -896 Left 2 ;.step param I_in 220u 260u 5u
TEXT -1136 200 Left 2 ;.step param Vcm 0.5 1.4 0.1
TEXT -504 -328 Left 2 ;.step param R_test 4k 10k 500
TEXT 1032 400 Left 2 ;.dc Vcm .5 1.8 0.01
TEXT 1016 -304 Left 2 ;multiplicity:
TEXT 1280 -304 Left 2 !.param mult=1
TEXT 1784 -312 Left 2 ;.step param mult 1 16 1
TEXT 1784 -376 Left 2 ;.step param csrc_width 5u 50u 5u
TEXT 1784 -216 Left 2 ;.step param inv_p_length 200n 2u 50n
TEXT -1136 80 Left 2 ;.step param Vp 10m 400m 20m
